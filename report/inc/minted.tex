%% Pre-defined syntax
% py  -> python
% c   -> c
% vl  -> verilog
% sc  -> scala
% mat -> matlab
% log -> console

%% suffices
% inl     -> inline
% box     -> background, titled
% file    -> background, no title
% filebox -> background, titled

% -------- Example --------
\iffalse
    \begin{pybox}{Title}
        code here
    \end{pybox}

    \pyinl{a==1}

    \pyfile{a.py}

    \pyfilebox[Title]{a.py}

    \begin{minted}{python}
        code here
    \end{minted}
\fi
% ------------------------

\usepackage[cache=false,outputdir=tmp]{minted}
\usepackage[skins,breakable,minted]{tcolorbox}

% \setmonofont{Fira Code}
\usemintedstyle{trac}
\BeforeBeginEnvironment{minted}{\medskip\begin{tcolorbox}[breakable]}%
\AfterEndEnvironment{minted}{\end{tcolorbox}}%

% File
\newmintedfile[pyfile]{python}{}
\newmintedfile[cfile]{c}{}
\newmintedfile[vlfile]{verilog}{}
\newmintedfile[scfile]{scala}{}
\newmintedfile[matfile]{matlab}{}
\newmintedfile[logfile]{console}{}

% Inline
\newcommand{\pyinl}[1]{~\mintinline{python}{#1}~}
\newcommand{\cinl}[1]{~\mintinline{c}{#1}~}
\newcommand{\vlinl}[1]{~\mintinline{verilog}{#1}~}
\newcommand{\scinl}[1]{~\mintinline{scala}{#1}~}
\newcommand{\matinl}[1]{~\mintinline{matlab}{#1}~}
\newcommand{\loginl}[1]{~\mintinline{console}{#1}~}

\definecolor{mintedbackground}{rgb}{0.95,0.95,0.95}
\setminted[python,c,verilog,scala,matlab,console]{
    bgcolor=mintedbackground,
    fontfamily=tt,
    linenos=false,
    numberblanklines=true,
    numbersep=12pt,
    numbersep=5pt,
    gobble=0,
    % frame=leftline,
    framesep=2mm,
    funcnamehighlighting=true,
    tabsize=4,
    obeytabs=false,
    mathescape=false
    samepage=false,
    showspaces=false,
    showtabs =false,
    texcl=true,
    escapeinside=||,
    baselinestretch=1.2,
    fontsize=\footnotesize,
    breaklines=true,
}

% Box with title
\newtcblisting{pybox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=python,
    colback=mintedbackground,
    % minted options={texcl=true},
    listing only,
    #1,
    title=#2,
    breakable,
}
\newtcblisting{cbox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=c,
    colback=mintedbackground,
    % minted options={texcl=true},
    listing only,
    #1,
    title=#2,
    breakable,
}
\newtcblisting{vlbox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=verilog,
    colback=mintedbackground,
    % minted options={texcl=true},
    listing only,
    #1,
    title=#2,
    breakable,
}
\newtcblisting{scbox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=scala,
    colback=mintedbackground,
    % minted options={texcl=true},
    listing only,
    #1,
    title=#2,
    breakable,
}
\newtcblisting{matbox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=matlab,
    colback=mintedbackground,
    % minted options={texcl=true},
    listing only,
    #1,
    title=#2,
    breakable,
}
\newtcblisting{logbox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=console,
    colback=mintedbackground,
    % minted options={texcl=true},
    listing only,
    #1,
    title=#2,
    breakable,
}

% File Box with title
\newtcbinputlisting{\pyfilebox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=python,
    colback=mintedbackground,
    % minted options={texcl=true},
    title={#1},
    listing file={#2},
    listing only,
    breakable,
}
\newtcbinputlisting{\cfilebox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=c,
    colback=mintedbackground,
    % minted options={texcl=true},
    title={#1},
    listing file={#2},
    listing only,
    breakable,
}
\newtcbinputlisting{\vlfilebox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=verilog,
    colback=mintedbackground,
    % minted options={texcl=true},
    title={#1},
    listing file={#2},
    listing only,
    breakable,
}
\newtcbinputlisting{\scfilebox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=scala,
    colback=mintedbackground,
    % minted options={texcl=true},
    title={#1},
    listing file={#2},
    listing only,
    breakable,
}
\newtcbinputlisting{\matfilebox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=matlab,
    colback=mintedbackground,
    % minted options={texcl=true},
    title={#1},
    listing file={#2},
    listing only,
    breakable,
}
\newtcbinputlisting{\logfilebox}[2][]{
    % minted style=trac,
    listing engine=minted,
    minted language=console,
    colback=mintedbackground,
    % minted options={texcl=true},
    title={#1},
    listing file={#2},
    listing only,
    breakable,
}